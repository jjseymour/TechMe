<% cache(@events) do %>

<h1>Showing events</h1>

<div class="row">
  <div class="col-lg-8 col-md-10">
    <div class="panel-group" id="accordion">
      <%= render partial: 'shared/errors' %>

      <% @events.each_with_index do |event, i| %>
          <% cache(event) do %>
        <div class="panel">
          <a class="panel-heading collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapse<%= i %>" id= "getName" data-name="<%=i%>" aria-expanded="false">
            Event Name: <%= event["name"] %>
            <div class="indicator">
              <div class="icon">
                <span class="hr-line"></span>
                <span class="vr-line"></span>
              </div>
            </div>
          </a>
          <div id="collapse<%= i %>" class="panel-collapse collapse" aria-expanded="false">
            <div class="panel-body">
              <button id="save-event" class="pull-right btn btn-primary" data-event-button="<%= i %>">Add Event to Calendar</button>
              <h3>Event Name: </h3><p><%= event["name"] %></p>
              <h3>Location: </h3><p id="getCity" data-city="<%=i%>"><%= event["city"] %></p>
              <h3>Description: </h3><div id="getDescription" data-description="<%=i%>"><%= event["description"].html_safe %></div>
              <h3>How to attend:</h3><p id="getRsvp" data-rsvp="<%=i%>"><a href="<%= event["link"] %>" target="_blank"> Attend This Meetup</a></p>
            </div>
          </div>
        </div>
      <% end %>
      <% end %>
    </div>
  </div>
</div>
<% end %>
